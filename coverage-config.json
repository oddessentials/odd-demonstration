{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "description": "Coverage thresholds for all services. Single source of truth - CI reads from this file.",
    "thresholds": {
        "processor": {
            "min": 80,
            "warn": 85,
            "tool": "pytest-cov",
            "note": "Target achieved with mocked unit tests"
        },
        "metrics-engine": {
            "min": 10,
            "warn": 15,
            "tool": "go-cover",
            "note": "Infrastructure-heavy main package. Business logic is in validator subpackage (80%+)."
        },
        "read-model": {
            "min": 18,
            "warn": 25,
            "tool": "go-cover",
            "note": "Infrastructure-heavy main package. HTTP handlers and middleware are tested."
        },
        "tui": {
            "min": 32,
            "warn": 33,
            "tool": "cargo-tarpaulin",
            "measurement": "--lib --exclude-files src/main.rs",
            "note": "Lib coverage only. --exclude-files needed because tarpaulin --lib still measures main.rs. Event loop/rendering code in bin is not unit-testable."
        },
        "gateway": {
            "min": 80,
            "warn": 85,
            "tool": "vitest",
            "note": "TypeScript service with refactored lib/ modules. Core logic (validators, builders, config) maintains 100% coverage."
        }
    },
    "ratchet": {
        "enabled": true,
        "mode": "warn",
        "description": "Coverage can only increase. Decreases trigger warnings, not failures."
    }
}