{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "description": "Coverage thresholds for all services. Single source of truth - CI reads from this file.",
    "thresholds": {
        "processor": {
            "min": 80,
            "warn": 85,
            "tool": "pytest-cov",
            "note": "Target achieved with mocked unit tests"
        },
        "metrics-engine": {
            "min": 10,
            "warn": 15,
            "tool": "go-cover",
            "note": "Infrastructure-heavy main package. Business logic is in validator subpackage (80%+)."
        },
        "read-model": {
            "min": 18,
            "warn": 25,
            "tool": "go-cover",
            "note": "Infrastructure-heavy main package. HTTP handlers and middleware are tested."
        },
        "tui": {
            "min": 14,
            "warn": 20,
            "tool": "cargo-tarpaulin"
        }
    },
    "ratchet": {
        "enabled": true,
        "mode": "warn",
        "description": "Coverage can only increase. Decreases trigger warnings, not failures."
    }
}