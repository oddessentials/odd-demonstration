| Claimed core feature (source)                                                                        | Tests that prove it (or gaps)                                                                                                                                                                                                                                                                                                                                                                                                                 |
| ---------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **TUI – Guided Setup (prerequisite checking + clipboard install commands)** (from TUI features list) | **Covered:** `test_copy_to_clipboard_unknown_tool` and `test_copy_to_clipboard_valid_tool_returns_result` in `src/interfaces/tui/src/install.rs`. Prerequisite checking tested via `test_check_all_prerequisites_*` and `test_has_missing_prerequisites_*` in `doctor.rs`. (Sources: `install.rs`, `doctor.rs`) |
| **TUI – Cluster Launcher (one-key cluster startup)** (from TUI features list)                        | **Partial (integration-level):** `run_setup_script` in `cluster.rs` spawns external process. Unit tests verify cluster status types (`test_cluster_status_*`). Full E2E requires manual verification. (Source: `cluster.rs`) |
| **TUI – Real-time Stats (jobs/completions/failures)** (from TUI features list)                       | **Covered:** `test_stats_struct_matches_read_model_response` verifies Stats JSON deserialization from Read Model format. `test_stats_default` verifies default values. (Source: `src/interfaces/tui/src/types.rs:531-540`) |
| **TUI – Alerts Panel (active Prometheus alerts)** (from TUI features list)                           | **Covered:** `test_alert_labels_all_optional`, `test_alert_labels_partial`, `test_alert_full`, `test_alert_clone` verify Alert/AlertLabels deserialization. (Source: `src/interfaces/tui/src/types.rs:626-662`) |
| **TUI – UI Launcher (quick access to web interfaces)** (from TUI features list)                      | **Covered:** `test_ui_registry_deserialization`, `test_ui_registry_empty_entries`, `test_ui_entry_deserialization`, `test_ui_entry_clone` verify registry parsing. `open_browser` in `cluster.rs` handles SSH/headless detection. (Source: `src/interfaces/tui/src/types.rs:578-621`) |
| **Web Terminal – Identical Rendering (xterm.js mirrors TUI)** (from Web Terminal features)           | **Partially covered (nightly):** Visual regression tests target rendering fidelity (`tests/visual/terminal.spec.ts`). Currently `describe.skip` in CI; enabled in nightly workflow. (Sources: `src/interfaces/web/README.md`, `tests/visual/terminal.spec.ts`) |
| **Web Terminal – Session Reconnect (refresh reconnects same PTY)**                                   | **Covered (server-side):** `test_reconnect_with_valid_token`, `test_reconnect_single_use_token` in `session.rs`. Client-side reconnect behavior verified in `tests/visual/pty-state.spec.ts`. (Sources: `session.rs`, `pty-state.spec.ts`) |
| **Web Terminal – Auto-Reconnect (exponential backoff)**                                              | **Gap (client-side):** Backoff logic exists in `terminal.js` but no explicit test validates timing behavior. (Source: `src/interfaces/web/terminal.js`) |
| **Web Terminal – Fallback Dashboard (when terminal unavailable)**                                    | **Covered:** `Fallback Dashboard` tests enabled in `tests/visual/terminal.spec.ts` using server-side failure injection (`?test_mode=fail`). (Sources: `terminal.spec.ts:163-195`) |
| **Web PTY Server – Session Management (R2: single-use reconnect tokens)**                            | **Covered:** Unit tests in `src/services/web-pty-server/src/session.rs` verify reconnect tokens and single-use behavior (`test_reconnect_with_valid_token`, `test_reconnect_single_use_token`). Integration test also checks session message includes reconnect token in `tests/visual/pty-state.spec.ts`. (Sources: `src/services/web-pty-server/README.md`, `src/services/web-pty-server/src/session.rs`, `tests/visual/pty-state.spec.ts`) |
| **Web PTY Server – Resource Limits (R3: per-IP/global caps, idle timeout)**                          | **Covered:** Unit tests in `src/services/web-pty-server/src/session.rs` for per-IP/global caps and idle cleanup (`test_per_ip_cap`, `test_global_cap`, `test_cleanup_idle_sessions`). (Sources: `src/services/web-pty-server/README.md`, `src/services/web-pty-server/src/session.rs`) |
| **Web PTY Server – Read-Only Mode (R4)**                                                             | **Covered:** `test_read_only_notice_rate_limiting` in `src/services/web-pty-server/src/session.rs` validates read-only notices/rate limiting. (Sources: `src/services/web-pty-server/README.md`, `src/services/web-pty-server/src/session.rs`) |
| **Web PTY Server Authentication (R5)**                                                               | **Covered:** `src/services/web-pty-server/src/auth.rs` tests for valid/invalid bearer and query auth (`test_auth_*`). (Sources: `src/services/web-pty-server/README.md`, `src/services/web-pty-server/src/auth.rs`) |
| **Web PTY Server – Keepalive (R6: WebSocket ping/pong)**                                             | **Implemented (integration-level):** Ping/pong handling in `main.rs:330-469` with 30s interval and 60s timeout. `ClientMessage::Ping`/`ServerMessage::Pong` defined in `protocol.rs`. No unit test due to async event loop. (Sources: `main.rs`, `protocol.rs`) |
| **Web PTY Server – Terminal Capabilities (R7: TERM=xterm-256color, UTF-8, truecolor)**               | **Implemented:** Terminal env vars set in both `pty.rs:56-59` and `pty_task.rs:110-114`. No explicit unit test for env setup. (Sources: `pty.rs`, `pty_task.rs`) |
| **Web PTY Server – Output Coalescing (R9: batching/backpressure)**                                   | **Covered (backpressure):** `test_output_queue_backpressure` in `session.rs`. Coalescing buffer/ticker logic in `main.rs:336-450` (integration-level). (Sources: `session.rs`, `main.rs`) |
